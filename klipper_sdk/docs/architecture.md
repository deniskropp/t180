# Klipper SDK Architecture

## Architectural Patterns
- **Client-Server**: The SDK acts as a client to the Klipper D-Bus server.
- **Repository Pattern**: Abstract the D-Bus communication behind a repository/client interface to allow for easier testing and potential support for other backends.
- **Data Transfer Objects (DTOs)**: Use Pydantic models to represent clipboard history items, ensuring consistency and type safety.

## API Design

### `KlipperClient`
The primary entry point for users.

| Method | Description |
| --- | --- |
| `get_history() -> List[ClipboardItem]` | Fetches all history items. |
| `set_clipboard(text: str)` | Sets the current system clipboard to `text`. |
| `get_current() -> ClipboardItem` | Gets the active clipboard content. |
| `clear_history()` | Wipes the historical items. |
| `select_item(item_id: str)` | Selects a specific item by its identifier. |

### `ClipboardItem` (Model)
- `content: str`: The text content.
- `timestamp: datetime`: When it was added.
- `id: str`: A unique hash or identifier provided by Klipper (or generated by SDK).

## D-Bus Interface
The SDK will target the `org.kde.klipper` service.
- **Object Path**: `/klipper`
- **Interface**: `org.kde.klipper.klipper`
- **Methods**:
    - `getClipboardHistoryMenu()`: Potentially for UI navigation.
    - `getClipboardHistoryItem(int index)`: Retrieve a single item.
    - `setClipboardContents(str)`: Update clipboard.
    - `clearClipboardHistory()`: Clear history.
